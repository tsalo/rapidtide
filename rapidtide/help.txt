usage: parse.py [-h] [--venousrefine | --nirs]
                [--datatstep TSTEP | --datafreq FREQ] [-a] [--invert]
                [--interptype {univariate,cubic,quadratic}]
                [--offsettime OFFSETTIME] [--butterorder ORDER]
                [-F LOWERFREQ UPPERFREQ [LOWERSTOP UPPERSTOP] ...] |
                --filtertype {arb,vlf,lfo,resp,cardiac} | -V | -L | -R | -C]
                [-N NREPS] [--skipsighistfit]
                [--windowfunc {hamming,hann,blackmanharris,None} | --nowindow]
                [-f GAUSSSIGMA] [-M] [--meanscale] [--slicetimes FILE]
                [--numskip SKIP] [--nothresh] [--oversampfac OVERSAMPFAC]
                [--regressor FILE]
                [--regressorfreq FREQ | --regressortstep TSTEP]
                [--regressorstart START]
                [--corrweighting {none,phat,liang,eckart} | --nodetrend]
                [--corrmaskthresh PCT | --corrmask FILE]
                [-Z DELAYTIME | -r LAGMIN LAGMAX] [-s SIGMALIMIT] [--bipolar]
                [--nofitfilt] [--maxfittype {gauss,quad}]
                [--despecklepasses PASSES] [--despecklethresh VAL]
                [--refineprenorm {None,mean,var,std,invlag}]
                [--refineweighting {None,NIRS,R,R2}] [--passes PASSES]
                [--includemask FILE] [--excludemask FILE] [--lagminthresh MIN]
                [--lagmaxthresh MAX] [--ampthresh AMP] [--sigmathresh SIGMA]
                [--refineoffset] [--psdfilter]
                [--refineupperlag | --refinelowerlag]
                [--refinetype {avg,pca,ica,weightedavg}] [--limitoutput]
                [--savelags] [--histlen HISTLEN] [--timerange START END]
                [--glmsourcefile FILE] [--noglm] [--preservefiltering]
                [--noprogressbar] [--wiener] [--usesp] [--cifti] [-S] [-d]
                [--nonumba] [--nosharedmem] [--memprofile] [--nprocs NPROCS]
                [--debug] [--cleanrefined] [--dispersioncalc] [--acfix]
                [--tmask FILE] [-p | -P] [-A ARMODELORDER]
                in_file prefix

positional arguments:
  in_file               The input data file (BOLD fmri file or NIRS)
  prefix                The root name for the output files

optional arguments:
  -h, --help            show this help message and exit

Macros:
  --venousrefine        This is a macro that sets --lagminthresh=2.5,
                        --lagmaxthresh=6.0, --ampthresh=0.5, and
                        --refineupperlag to bias refinement towards voxels in
                        the draining vasculature for an fMRI scan.
  --nirs                This is a NIRS analysis - this is a macro that sets
                        --nothresh, --preservefiltering, --refineprenorm=var,
                        --ampthresh=0.7, and --lagminthresh=0.1.

Preprocessing options:
  --datatstep TSTEP     Set the timestep of the data file to TSTEP. This will
                        override the TR in an fMRI file. NOTE: if using data
                        from a text file, for example with NIRS data, using
                        one of these options is mandatory.
  --datafreq FREQ       Set the timestep of the data file to 1/FREQ. This will
                        override the TR in an fMRI file. NOTE: if using data
                        from a text file, for example with NIRS data, using
                        one of these options is mandatory.
  -a                    Disable antialiasing filter
  --invert              Invert the sign of the regressor before processing
  --interptype {univariate,cubic,quadratic}
                        Use specified interpolation type. Options are
                        'cubic','quadratic', and 'univariate' (default).
  --offsettime OFFSETTIME
                        Apply offset OFFSETTIME to the lag regressors
  --butterorder ORDER   Use butterworth filter for band splitting instead of
                        trapezoidal FFT filter and set filter order to ORDER.
  -F LOWERFREQ UPPERFREQ [LOWERSTOP UPPERSTOP] ...]
                        Filter data and regressors from LOWERFREQ to
                        UPPERFREQ. LOWERSTOP and UPPERSTOP can also be
                        specified, or will be calculated automatically
  --filtertype {arb,vlf,lfo,resp,cardiac}
                        Filter data and regressors to specific band
  -V                    Filter data and regressors to VLF band
  -L                    Filter data and regressors to LFO band
  -R                    Filter data and regressors to respiratory band
  -C                    Filter data and regressors to cardiac band
  -N NREPS, --numnull NREPS
                        Estimate significance threshold by running NREPS null
                        correlations (default is 10000, set to 0 to disable)
  --skipsighistfit      Do not fit significance histogram with a Johnson SB
                        function
  --windowfunc {hamming,hann,blackmanharris,None}
                        Window funcion to use prior to correlation. Options
                        are hamming (default), hann, blackmanharris, and None
  --nowindow            Disable precorrelation windowing
  -f GAUSSSIGMA         Spatially filter fMRI data prior to analysis using
                        GAUSSSIGMA in mm
  -M, --globalmean      Generate a global mean regressor and use that as the
                        reference regressor
  --meanscale           Mean scale regressors during global mean estimation
  --slicetimes FILE     Apply offset times from FILE to each slice in the
                        dataset
  --numskip SKIP        SKIP TRs were previously deleted during preprocessing
                        (default is 0)
  --nothresh            Disable voxel intensity threshold (especially useful
                        for NIRS data)

Correlation options:
  --oversampfac OVERSAMPFAC
                        Oversample the fMRI data by the following integral
                        factor (default is 2)
  --regressor FILE      Read probe regressor from file FILE (if none
                        specified, generate and use global regressor)
  --regressorfreq FREQ  Probe regressor in file has sample frequency FREQ
                        (default is 1/tr) NB: --regressorfreq and
                        --regressortstep) are two ways to specify the same
                        thing
  --regressortstep TSTEP
                        Probe regressor in file has sample frequency FREQ
                        (default is 1/tr) NB: --regressorfreq and
                        --regressortstep) are two ways to specify the same
                        thing
  --regressorstart START
                        The time delay in seconds into the regressor file,
                        corresponding in the first TR of the fMRI file
                        (default is 0.0)
  --corrweighting {none,phat,liang,eckart}
                        Method to use for cross-correlation weighting.
  --nodetrend           Disable linear trend removal
  --corrmaskthresh PCT  Do correlations in voxels where the mean exceeds this
                        percentage of the robust max (default is 1.0)
  --corrmask FILE       Only do correlations in voxels in FILE (if set,
                        corrmaskthresh is ignored).

Correlation fitting options:
  -Z DELAYTIME          Don't fit the delay time - set it to DELAYTIME seconds
                        for all voxels
  -r LAGMIN LAGMAX      Limit fit to a range of lags from LAGMIN to LAGMAX
  -s SIGMALIMIT         Reject lag fits with linewidth wider than SIGMALIMIT
                        Hz
  --bipolar             Bipolar mode - match peak correlation ignoring sign
  --nofitfilt           Do not zero out peak fit values if fit fails
  --maxfittype {gauss,quad}
                        Method for fitting the correlation peak (default is
                        'gauss'). 'quad' uses a quadratic fit. Faster but not
                        as well tested
  --despecklepasses PASSES
                        Detect and refit suspect correlations to disambiguate
                        peak locations in PASSES passes
  --despecklethresh VAL
                        Refit correlation if median discontinuity magnitude
                        exceeds VAL (default is 5s)

Regressor refinement options:
  --refineprenorm {None,mean,var,std,invlag}
                        Apply TYPE prenormalization to each timecourse prior
                        to refinement. Valid weightings are 'None', 'mean'
                        (default), 'var', and 'std'
  --refineweighting {None,NIRS,R,R2}
                        Apply TYPE weighting to each timecourse prior to
                        refinement. Valid weightings are 'None', 'NIRS', 'R',
                        and 'R2' (default)
  --passes PASSES       Set the number of processing passes to PASSES
  --includemask FILE    Only use voxels in NAME for global regressor
                        generation and regressor refinement
  --excludemask FILE    Do not use voxels in NAME for global regressor
                        generation and regressor refinement
  --lagminthresh MIN    For refinement, exclude voxels with delays less than
                        MIN (default is 0.5s)
  --lagmaxthresh MAX    For refinement, exclude voxels with delays greater
                        than MAX (default is 5s)
  --ampthresh AMP       or refinement, exclude voxels with correlation
                        coefficients less than AMP (default is 0.3)
  --sigmathresh SIGMA   For refinement, exclude voxels with widths greater
                        than SIGMA (default is 100s)
  --refineoffset        Bipolar mode - match peak correlation ignoring sign
  --psdfilter           Apply a PSD weighted Wiener filter to shifted
                        timecourses prior to refinement
  --refineupperlag      Only use positive lags for regressor refinement
  --refinelowerlag      Only use negative lags for regressor refinement
  --refinetype {avg,pca,ica,weightedavg}
                        Method with which to derive refined regressor.

Output options:
  --limitoutput         Don't save some of the large and rarely used files
  --savelags            Save a table of lagtimes used
  --histlen HISTLEN     Change the histogram length to HISTLEN (default is
                        100)
  --timerange START END
                        Limit analysis to data between timepoints START and
                        END in the fmri file
  --glmsourcefile FILE  Regress delayed regressors out of FILE instead of the
                        initial fmri file used to estimate delays
  --noglm               Turn off GLM filtering to remove delayed regressor
                        from each voxel (disables output of fitNorm)
  --preservefiltering   Don't reread data prior to GLM

Miscellaneous options:
  --noprogressbar       Will disable progress bars
  --wiener              Do Wiener deconvolution to find voxel transfer
                        function
  --usesp               Use single precision for internal calculations (may be
                        useful when RAM is limited)
  --cifti               Data file is a converted CIFTI
  -S                    Simulate a run - just report command line options
  -d                    Display plots of interesting timecourses
  --nonumba             Disable jit compilation with numba
  --nosharedmem         Disable use of shared memory for large array storage
  --memprofile          Enable memory profiling for debugging - warning: this
                        slows things down a lot.
  --nprocs NPROCS       Use NPROCS worker processes for multiprocessing.
                        Setting NPROCS to less than 1 sets the number of
                        worker processes to n_cpus - 1.
  --debug               Enable additional information output

Experimental options (not fully tested, may not work):
  --cleanrefined        Perform additional processing on refined regressor to
                        remove spurious components.
  --dispersioncalc      Generate extra data during refinement to allow
                        calculation of dispersion.
  --acfix               Perform a secondary correlation to disambiguate peak
                        location (enables --accheck). Experimental.
  --tmask FILE          Only correlate during epochs specified in MASKFILE
                        (NB: each line of FILE contains the time and duration
                        of an epoch to include
  -p                    Prewhiten and refit data
  -P                    Save prewhitened data (turns prewhitening on)
  -A ARMODELORDER, --AR ARMODELORDER
                        Set AR model order (default is 1)
